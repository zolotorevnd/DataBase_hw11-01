# Домашнее задание к занятию «Базы данных, их типы»
### Золоторев Н.Д.

### Задание 1

Кейс

Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

### Решение 1

1.1. Реляционная СУБД (OLTP/OLAP-сочетание): PostgreSQL, Oracle, MS SQL Server

    Почему: сильная целостность данных, транзакционная надёжность, поддержка сложных запросов, мощные механизмы агрегации и оконных функций для аналитики.

1.2. Реляционная СУБД: PostgreSQL, MySQL

    Почему: строгая схема для CRM-данных, целостность связей (клиенты, сделки, этапы), транзакционная надёжность.

1.3. Реляционная база (PostgreSQL, MS SQL Server)

    Почему: простая и понятная структура, чёткие связи между процессами, роли и доступы, управление версиями норм и материалов, история изменений.

1.4. Графовая база (Neo4j, RedisGraph)

    Почему: задачи маршрутизации и распределения часто выражаются как графы: узлы (объекты, клиенты, склады, курьеры) и рёбра (маршруты, связи, время доставки). Быстрые запросы на кратчайшие пути, соотношение загруженности курьеров и объектов.

### Задание 2

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

### Решение 2

    Валидация данных

        Проверка корректности номера телефона и суммы пополнения
        Проверка лимитов и ограничений

    Аутентификация пользователя

        Подтверждение платежа через:
            SMS-код
            3D-Secure
            Биометрию

    Блокировка средств
    
        Резервирование суммы на счете отправителя
        Проверка достаточности баланса

    Зачисление средств оператору

        Перевод денег оператору связи
        Обновление баланса телефона

    Фиксация транзакции

        Запись операции в базу данных банка
        Запись операции в базу оператора связи
        Генерация чека/квитанции

    Уведомление сторон

        Отправка SMS пользователю
        Push-уведомление в мобильном приложении
        Обновление истории операций

### Задание 3

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

### Решение 3

    1. Гарантии целостности данных (ACID)

        SQL-системы обеспечивают транзакционность, атомарность, консистентность, долговечность. Это критично для финансовых операций, бухгалтерии и любых сценариев, где важно избежать неконсистентных состояний.

    2. Строгая структура данных и схемы

        Реляционные модели и схемы данных помогают поддерживать четкие связи между сущностями, целостные внешние ключи, ограничения и нормализацию. Это упрощает проектирование, валидацию и масштабируемую эволюцию данных.

    3. Мощные возможности SQL-запросов

        Язык SQL предоставляет богатый набор операций: сложные join-ы, агрегации, оконные функции, подзапросы, группировки. Это облегчает аналитическую обработку, отчётность и сложные бизнес-правила без дополнительной логики на уровне приложений.

    4. Единая экосистема инструментов

        Большое сообщество и зрелая экосистема: инструменты для ETL/BI, репликации, резервного копирования, мониторинга, миграций, тестирования и т.д. Это ускоряет разработку, обеспечивает надежную поддержку и совместимость между компонентами.

    5. Прогнозируемость производительности и оптимизация

        Оптимизаторы запросов, индексы, схемы разделения (sharding) и планы исполнения позволяют добиться предсказуемой производительности для типовых рабочих нагрузок с хорошо структурированными данными. Это особенно важно для операций с транзакциями и кросс-системной аналитикой.



### Задание 4

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

Приведите ответ в свободной форме.

### Решение 4

1. Масштабируемость

- Возможность линейного увеличения производительности при добавлении узлов
- Поддержка 1000+ нод без деградации производительности

2. Модель распределения данных

- Поддержка эффективного шардинга/партиционирования
- Распределённое выполнение запросов (MPP - Massively Parallel Processing)

3. Тип рабочей нагрузки

- OLTP (высокая конкурентность) vs OLAP (аналитические запросы)
- Поддержка batch processing и stream processing

4. Уровень согласованности

- Требования к consistency (strong/eventual)
- Поддержка распределённых транзакций

5. Экосистема и инструменты

- Интеграция с BigData-стеком (Hadoop, Spark)
- Мониторинг и управление кластером
- Рекомендуемая модель: MPP (Massively Parallel Processing)

Почему MPP лучше всего подходит:

1. Горизонтальное масштабирование

- Запросы параллельно выполняются на всех узлах
- Данные распределены по всем машинам кластера

2. Высокая производительность

- Локальная обработка данных на каждом узле
- Минимизация перемещения данных между узлами

3. Отказоустойчивость

- Репликация данных между узлами
- Автоматическое восстановление при сбоях

4. Гибкость

- Поддержка как аналитических, так и транзакционных нагрузок
- Возможность обработки структурированных и полуструктурированных данных

### Какие СУБД подойдут: 

| СУБД | Тип | Преимущества для данного кейса |
|------|-----|-------------------------------|
| **Greenplum** | MPP SQL | Оптимален для аналитики, основан на PostgreSQL |
| **ClickHouse** | MPP OLAP | Экстремальная скорость для аналитических запросов |
| **CockroachDB** | NewSQL | Горизонтальное масштабирование + ACID |
| **Apache Doris** | MPP | Гибкая архитектура, поддержка реального времени |

